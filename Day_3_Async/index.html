<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button onclick="fetchData()">Click here to fetch data</button>

<script>
    //Promise chaining
    // let userId=1;
    // function fetchData(){
    //     getUserDetails()
    //         .then(user=>getUserPosts(user.id))
    //         .then(posts => getUserComments(posts[0].id))
    //         .then(comments=>console.log(comments))
    // }
    // function getUserDetails(userId)
    // {
    //     return fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
    //     .then(response=>response.json())
    //     .catch(error => console.error(error))
    // }
    // function getUserPosts()
    // {
    //     return fetch(`https://jsonplaceholder.typicode.com/posts?userId=${user.id}`)
    //     .then(response=>response.json())
    //     .catch(error => console.error(error))
    // }
    // function getUserComments()
    // {
    //     return fetch(`https://jsonplaceholder.typicode.com/comments?postId=${postId}`)
    //     .then(response=>response.json())
    //     .catch(error => console.error(error))
    // }

//================================

//Async and await

async function fetchData()
{
    try{
        let userId=1;
        let response=await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
        let user= await response.json();
        console.log(user)

        let postsResponse= await fetch(`https://jsonplaceholder.typicode.com/posts?userId=${user.id}`)
        let posts=await postsResponse.json();
        console.log(posts)

        let commentsResponse=await fetch(`https://jsonplaceholder.typicode.com/comments?postId=${posts[0].id}`)
        let comments=await commentsResponse.json()
        console.log(comments[0])

    }
    catch{
        console.log("Error")
    }
}


</script>
</body>
</html>